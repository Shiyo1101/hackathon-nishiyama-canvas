# ã«ã—ã‚„ã¾ãã‚ƒã‚“ã°ã™ï¼ (Nishiyama Canvas!)

ç¦äº•çœŒé¯–æ±Ÿå¸‚ã€Œè¥¿å±±å‹•ç‰©åœ’ã€ã®ãƒ¬ãƒƒã‚µãƒ¼ãƒ‘ãƒ³ãƒ€ã‚’ãƒ†ãƒ¼ãƒã«ã—ãŸãƒ‡ã‚¸ã‚¿ãƒ«ã‚µã‚¤ãƒãƒ¼ã‚¸ä½œæˆãƒ»ç®¡ç†ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

## ğŸ“‹ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å‹•ç‰©åœ’ã‹ã‚‰æä¾›ã•ã‚Œã‚‹ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚„ãƒ¬ãƒƒã‚µãƒ¼ãƒ‘ãƒ³ãƒ€ã®å†™çœŸï¼ˆã‚ªãƒ¼ãƒ—ãƒ³ãƒ‡ãƒ¼ã‚¿ï¼‰ã‚’æ´»ç”¨ã—ã¦ã€ç‹¬è‡ªã®ãƒ‡ã‚¸ã‚¿ãƒ«ã‚µã‚¤ãƒãƒ¼ã‚¸ãƒšãƒ¼ã‚¸ã‚’ä½œæˆãƒ»å…¬é–‹ã§ãã¾ã™ã€‚

### ä¸»ãªæ©Ÿèƒ½

- **ã‚µã‚¤ãƒãƒ¼ã‚¸ä½œæˆ**: ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã§ç°¡å˜ã«ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä½œæˆ
- **1ãƒ¦ãƒ¼ã‚¶ãƒ¼1ã‚µã‚¤ãƒãƒ¼ã‚¸**: ç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ã¯å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯1ã¤ã®ã‚µã‚¤ãƒãƒ¼ã‚¸ã®ã¿ä½œæˆå¯èƒ½
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°**: WebSocketã«ã‚ˆã‚‹è‡ªå‹•ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ›´æ–°
- **å…¬é–‹/éå…¬é–‹è¨­å®š**: ã‚µã‚¤ãƒãƒ¼ã‚¸ã®å…¬é–‹çŠ¶æ…‹ã‚’ç®¡ç†
- **é€šå ±æ©Ÿèƒ½**: ä¸é©åˆ‡ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’äº‹å¾Œé€šå ±

## ğŸ›  æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (apps/web)

- **Next.js 15** (App Router)
- **TypeScript 5+**
- **Tailwind CSS** + shadcn/ui
- **Jotai** (çŠ¶æ…‹ç®¡ç†)
- **Hono RPC Client** (å‹å®‰å…¨ãªAPIé€šä¿¡)
- **@dnd-kit** (ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—)
- **Socket.io-client** (WebSocket)

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (apps/api)

- **Hono** (APIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ with RPC support)
- **TypeScript 5+**
- **Prisma** (ORM)
- **Better Auth** (èªè¨¼)
- **Socket.io** (WebSocket)
- **Zod** (ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³)
- **dotenv** (ç’°å¢ƒå¤‰æ•°ç®¡ç†)
- **Vitest** (ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯)

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

- **PostgreSQL 15+**
- **Prisma** (çµ±åˆ: `apps/api/prisma/`)

### é–‹ç™ºãƒ„ãƒ¼ãƒ«

- **pnpm** (ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼)
- **Turbo** (ãƒ¢ãƒãƒ¬ãƒãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ )
- **Biome** (ãƒªãƒ³ã‚¿ãƒ¼ãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼)
- **Docker Compose** (PostgreSQLç’°å¢ƒ)

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ (Monorepo)

```project-tree
nishiyama-canvas/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ api/              # Hono ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ + Prisma
â”‚   â”‚   â”œâ”€â”€ prisma/       # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒãƒ»ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â”œâ”€â”€ lib/db.ts # Prisma ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚       â”œâ”€â”€ types/    # API å‹å®šç¾©
â”‚   â”‚       â””â”€â”€ test/     # ãƒ†ã‚¹ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
â”‚   â””â”€â”€ web/              # Next.js ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
â”‚       â””â”€â”€ src/
â”‚           â””â”€â”€ types/    # Web å‹å®šç¾©
â”œâ”€â”€ docs/                 # è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ .github/              # GitHub Actions CI/CD
â”œâ”€â”€ docker-compose.yml    # PostgreSQL Dockerè¨­å®š
â”œâ”€â”€ pnpm-workspace.yaml   # pnpm ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è¨­å®š
â”œâ”€â”€ turbo.json            # Turbo ãƒ“ãƒ«ãƒ‰è¨­å®š
â””â”€â”€ package.json          # ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãƒ«ãƒ¼ãƒˆ
```

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶

ä»¥ä¸‹ã®ãƒ„ãƒ¼ãƒ«ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

- **Node.js**: v18.0+ ([ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://nodejs.org/))
- **pnpm**: v8.0+ ([ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://pnpm.io/installation))
- **Docker** & **Docker Compose**: æœ€æ–°ç‰ˆ ([ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://docs.docker.com/get-docker/))
- **Git**: v2.0+

> **Note**: PostgreSQLã¯Docker Composeã§è‡ªå‹•çš„ã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã•ã‚Œã¾ã™ã€‚ãƒ­ãƒ¼ã‚«ãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ä¸è¦ã§ã™ã€‚

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone https://github.com/your-org/nishiyama-canvas.git
cd nishiyama-canvas
```

### 2. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pnpm install
```

### 3. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

```bash
# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ç”¨ã®ç’°å¢ƒå¤‰æ•°
cp apps/api/.env.example apps/api/.env.local

# ãƒ†ã‚¹ãƒˆç’°å¢ƒç”¨ã®ç’°å¢ƒå¤‰æ•°ï¼ˆãƒ†ã‚¹ãƒˆå°‚ç”¨DBä½¿ç”¨ï¼‰
cp apps/api/.env.example apps/api/.env.test

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç”¨ã®ç’°å¢ƒå¤‰æ•°
cp apps/web/.env.example apps/web/.env.local
```

`.env.local`ã¨`.env.test`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šæƒ…å ±ãªã©ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚

**ç’°å¢ƒå¤‰æ•°ã®ç®¡ç†**:

- **é–‹ç™ºç’°å¢ƒ**: `.env.local` (å„ªå…ˆåº¦: `.env.local` > `.env`)
- **ãƒ†ã‚¹ãƒˆç’°å¢ƒ**: `.env.test` (ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚ã«è‡ªå‹•èª­ã¿è¾¼ã¿)
- **æœ¬ç•ªç’°å¢ƒ**: ç’°å¢ƒå¤‰æ•°ã‚’ç›´æ¥è¨­å®šï¼ˆ`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã¯ä½¿ç”¨ã—ãªã„ï¼‰

### 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆDocker Composeï¼‰

```bash
# PostgreSQLã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•
docker compose up -d

# ã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã™ã‚‹ã¾ã§å°‘ã—å¾…ã¤ï¼ˆåˆå›ã¯10ç§’ç¨‹åº¦ï¼‰
# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ãŒé€šã‚‹ã®ã‚’ç¢ºèª
docker compose ps

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œ
cd apps/api
pnpm prisma generate
pnpm prisma migrate dev --name init

# ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥ï¼ˆé–‹ç™ºç”¨ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼‰
pnpm prisma db seed

# ãƒ†ã‚¹ãƒˆå°‚ç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆæ¨å¥¨ï¼‰
# ã¾ãšã€ãƒ†ã‚¹ãƒˆç”¨DBã‚’ä½œæˆ
docker compose exec postgres psql -U nishiyama_user -d postgres -c "CREATE DATABASE nishiyama_canvas_test;"

# ãƒ†ã‚¹ãƒˆç”¨DBã«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é©ç”¨
DATABASE_URL="postgresql://nishiyama_user:nishiyama_password@localhost:5432/nishiyama_canvas_test" pnpm prisma migrate deploy
```

**Docker Composeè¨­å®šå†…å®¹:**

- PostgreSQL 15ï¼ˆAlpine Linuxï¼‰
- é–‹ç™ºç”¨DB: `nishiyama_canvas_dev`
- ãƒ†ã‚¹ãƒˆç”¨DB: `nishiyama_canvas_test`ï¼ˆæ‰‹å‹•ä½œæˆï¼‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼å: `nishiyama_user`
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: `nishiyama_password`
- ãƒãƒ¼ãƒˆ: `5432`
- ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–: Dockerãƒœãƒªãƒ¥ãƒ¼ãƒ ä½¿ç”¨

### 5. Better Authï¼ˆèªè¨¼ï¼‰ã®è¨­å®š

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€èªè¨¼ã«**Better Auth**ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚

**é‡è¦**: ãƒ¡ãƒ¼ãƒ«ãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼ã¯å»ƒæ­¢ã—ã€**ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆGoogleã€Discordã€LINEï¼‰ã®ã¿**ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

```bash
# AUTH_SECRETã‚’ç”Ÿæˆï¼ˆ32æ–‡å­—ä»¥ä¸Šã®ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ï¼‰
# apps/api/.env.local ã«è¨­å®šã—ã¦ãã ã•ã„

# ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³è¨­å®šï¼ˆã™ã¹ã¦å¿…é ˆï¼‰
# Google, Discord, LINEã®é–‹ç™ºè€…ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§OAuthã‚¢ãƒ—ãƒªã‚’ä½œæˆã—ã€
# ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIDã¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ .env.local ã«è¨­å®š
```

è©³ç´°ã¯[Better Authã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰](./docs/better-auth-setup.md)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### 6. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
# ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§å…¨ã¦ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•
pnpm dev

# ã¾ãŸã¯å€‹åˆ¥ã«èµ·å‹•
pnpm dev:api    # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã¿ (http://localhost:8000)
pnpm dev:web    # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã¿ (http://localhost:3000)
```

## ğŸ“ é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

### å…¨èˆ¬

```bash
pnpm dev              # å…¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•ï¼ˆTurboä½¿ç”¨ï¼‰
pnpm build            # å…¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰ï¼ˆTurboä½¿ç”¨ï¼‰
pnpm test             # ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pnpm test:watch       # ãƒ†ã‚¹ãƒˆã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰
pnpm test:coverage    # ã‚«ãƒãƒ¬ãƒƒã‚¸å–å¾—
pnpm test:ui          # Vitest UIãƒ¢ãƒ¼ãƒ‰
pnpm type-check       # å‹ãƒã‚§ãƒƒã‚¯
pnpm check            # Biomeãƒã‚§ãƒƒã‚¯
pnpm check:fix        # Biomeè‡ªå‹•ä¿®æ­£
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ

```bash
pnpm db:migrate       # ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
pnpm db:push          # ã‚¹ã‚­ãƒ¼ãƒã‚’DBã«åæ˜ ï¼ˆé–‹ç™ºç”¨ï¼‰
pnpm db:studio        # Prisma Studioèµ·å‹• (http://localhost:5555)
pnpm db:seed          # ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿æŠ•å…¥

# ç‰¹å®šã®ã‚¢ãƒ—ãƒªã®ã¿å®Ÿè¡Œ
pnpm --filter=api test           # APIã®ãƒ†ã‚¹ãƒˆã®ã¿
pnpm --filter=api db:migrate     # APIã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ã¿
```

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è©³ç´°ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯`docs/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚Šã¾ã™ï¼š

- [è¦ä»¶å®šç¾©æ›¸](./docs/requirements.md)
- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸](./docs/architecture.md)
- [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆæ›¸](./docs/database-schema.md)
- [APIä»•æ§˜æ›¸](./docs/api-specification.md)
- [é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³](./docs/development-guidelines.md)
- [TDDé–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³](./docs/tdd-guidelines.md)
- [ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰](./docs/setup-guide.md)
- [å®Ÿè£…ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ](./docs/implementation-tasks.md)

## ğŸ¯ é–‹ç™ºã®é€²ã‚æ–¹

### 1. ã‚¿ã‚¹ã‚¯ç¢ºèª

`docs/implementation-tasks.md`ã§æ¬¡ã«å–ã‚Šçµ„ã‚€ã‚¿ã‚¹ã‚¯ã‚’ç¢ºèªã—ã¾ã™ã€‚

### 2. ãƒ–ãƒ©ãƒ³ãƒä½œæˆ

```bash
git checkout -b feature/123-feature-name
```

### 3. TDDã‚µã‚¤ã‚¯ãƒ«

1. **Red**: å¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’æ›¸ã
2. **Green**: ãƒ†ã‚¹ãƒˆã‚’é€šã™æœ€å°é™ã®å®Ÿè£…
3. **Refactor**: ã‚³ãƒ¼ãƒ‰ã‚’æ”¹å–„

### 4. ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯

```bash
pnpm check:fix && pnpm type-check && pnpm test
```

### 5. ã‚¿ã‚¹ã‚¯å®Œäº†ãƒãƒ¼ã‚¯

`docs/implementation-tasks.md`ã§è©²å½“ã‚¿ã‚¹ã‚¯ã‚’`- [x]`ã«å¤‰æ›´ã—ã¾ã™ã€‚

### 6. ã‚³ãƒŸãƒƒãƒˆ

```bash
git add .
git commit -m "feat(scope): description"
```

ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯[Conventional Commits](https://www.conventionalcommits.org/)å½¢å¼ã«å¾“ã£ã¦ãã ã•ã„ã€‚

## ğŸ“ ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

### TypeScript

- **`any`ã€`unknown`ã®ä½¿ç”¨ç¦æ­¢**: ã™ã¹ã¦ã®å¤‰æ•°ãƒ»é–¢æ•°ã«æ˜ç¤ºçš„ãªå‹å®šç¾©
- **ã‚¯ãƒ©ã‚¹ä½¿ç”¨ç¦æ­¢**: é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«æ¡ç”¨ï¼ˆä¾‹å¤–: `Error`ã‚¯ãƒ©ã‚¹ã®æ‹¡å¼µã®ã¿è¨±å¯ï¼‰
- **ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ç¦æ­¢**: ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼ã¯å®šæ•°åŒ–

### è‰¯ã„ä¾‹ âœ…

```typescript
interface Data { value: string; }
function processData(data: Data): string { ... }

type UserService = { getUser: (id: string) => Promise<User>; };
const createUserService = (repository: UserRepository): UserService => ({ ... });
```

### æ‚ªã„ä¾‹ âŒ

```typescript
function processData(data: any) { ... }
class UserService { ... }
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯**Vitest**ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

```bash
pnpm test              # å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pnpm test:watch        # ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ï¼ˆTDDæ¨å¥¨ï¼‰
pnpm test:coverage     # ã‚«ãƒãƒ¬ãƒƒã‚¸å–å¾—
pnpm test:ui           # Vitest UIãƒ¢ãƒ¼ãƒ‰

# ç‰¹å®šã®ã‚¢ãƒ—ãƒªã®ã¿
pnpm --filter=api test
```

**ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ç‰¹å¾´**:

- ãƒ†ã‚¹ãƒˆå°‚ç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆ`nishiyama_canvas_test`ï¼‰ã‚’ä½¿ç”¨
- `.env.test`ã‹ã‚‰ç’°å¢ƒå¤‰æ•°ã‚’è‡ªå‹•èª­ã¿è¾¼ã¿
- 39ãƒ†ã‚¹ãƒˆå…¨ã¦åˆæ ¼ç¢ºèªæ¸ˆã¿ âœ…

### E2Eãƒ†ã‚¹ãƒˆ

```bash
cd apps/web
pnpm test:e2e
pnpm test:e2e:ui
```

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Dockerã‚³ãƒ³ãƒ†ãƒŠã®ç®¡ç†

```bash
# ã‚³ãƒ³ãƒ†ãƒŠã®çŠ¶æ…‹ç¢ºèª
docker compose ps

# ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ­ã‚°ç¢ºèª
docker compose logs postgres
docker compose logs -f postgres  # ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¡¨ç¤º

# ã‚³ãƒ³ãƒ†ãƒŠã®å†èµ·å‹•
docker compose restart postgres

# ã‚³ãƒ³ãƒ†ãƒŠã®åœæ­¢
docker compose down

# ã‚³ãƒ³ãƒ†ãƒŠã¨ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’å®Œå…¨å‰Šé™¤ï¼ˆãƒ‡ãƒ¼ã‚¿ã‚‚å‰Šé™¤ã•ã‚Œã¾ã™ï¼ï¼‰
docker compose down -v

# ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•
docker compose up -d
```

### ãƒãƒ¼ãƒˆç«¶åˆ

```bash
# ãƒãƒ¼ãƒˆä½¿ç”¨çŠ¶æ³ã®ç¢ºèª
lsof -i :3000  # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
lsof -i :8000  # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
lsof -i :5432  # PostgreSQL

# ãƒ—ãƒ­ã‚»ã‚¹ã‚’çµ‚äº†
kill -9 <PID>

# Dockerã‚³ãƒ³ãƒ†ãƒŠãŒ5432ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆ
docker compose down
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼

```bash
# PostgreSQLã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•ç¢ºèª
docker compose ps

# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã®ç¢ºèª
docker compose ps | grep postgres
# â†’ "healthy" ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°OK

# ã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã—ã¦ã„ãªã„å ´åˆ
docker compose up -d

# ã‚³ãƒ³ãƒ†ãƒŠå†…ã®PostgreSQLã«ç›´æ¥æ¥ç¶šã—ã¦ç¢ºèª
docker compose exec postgres psql -U nishiyama_user -d nishiyama_canvas_dev
```

### Prismaãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼

```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ï¼å…¨ãƒ‡ãƒ¼ã‚¿ãŒå‰Šé™¤ã•ã‚Œã¾ã™ï¼‰
cd apps/api
pnpm prisma migrate reset

# å†åº¦ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
pnpm prisma migrate dev

# ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿æŠ•å…¥
pnpm prisma db seed

# ãã‚Œã§ã‚‚è§£æ±ºã—ãªã„å ´åˆã¯ã€Dockerã‚³ãƒ³ãƒ†ãƒŠã”ã¨ãƒªã‚»ãƒƒãƒˆ
docker compose down -v
docker compose up -d
sleep 10
pnpm prisma migrate dev
pnpm prisma db seed
```

## ğŸ“– å‚è€ƒãƒªãƒ³ã‚¯

- [pnpm Documentation](https://pnpm.io/)
- [Turborepo Documentation](https://turbo.build/)
- [Next.js Documentation](https://nextjs.org/)
- [Hono Documentation](https://hono.dev/)
- [Prisma Documentation](https://www.prisma.io/)
- [Better Auth Documentation](https://www.better-auth.com/)
- [Vitest Documentation](https://vitest.dev/)
- [Biome Documentation](https://biomejs.dev/)
- [è¥¿å±±å‹•ç‰©åœ’ã‚ªãƒ¼ãƒ—ãƒ³ãƒ‡ãƒ¼ã‚¿](https://ckan.odp.jig.jp/)

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚
